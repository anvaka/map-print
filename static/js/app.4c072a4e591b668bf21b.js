webpackJsonp([2],{"14gb":function(n,e,t){"use strict";var o=t("puH/")({});e.a=o},"9SxT":function(n,e,t){"use strict";var o,r,a,i={currentState:"intro",selected:null,aboutVisible:!1,blank:!1,error:null,kmlLayers:[],currentScript:"roads",showZoomWarning:!1,possibleScripts:{selected:"roads",options:[{value:"roads",text:"Roads"},{value:"buildings",text:"Buildings"},{value:"rivers",text:"Rivers"}]},downloadOsmProgress:null,building:!1,buildingMessage:"",zazzleLink:null,showCancelDownload:!1,getGraphBBox:function(){return r},getGraph:function(){return o},setGraph:function(n,e,t){o=n,r=e,a=t},startOver:function(){i.zazzleLink=null,i.generatingPreview=!1,i.currentState="intro",i.blank=!1,i.downloadOsmProgress=null,i.kmlLayers=[]},generatingPreview:!1,backgroundColor:{r:255,g:255,b:255,a:1},lineColor:{r:22,g:22,b:22,a:.85},getProjector:function(){return a},addKMLLayer:function(n,e){i.kmlLayers.push(function(n,e){var t={name:n,color:e.color,width:e.width,updateColor:function(){e.updateColor(t.color)},getKMLLayer:function(){return e}};return t}(n,e))},removeKMLLayer:function(n){var e=i.kmlLayers.indexOf(n);if(e<0)throw new Error("Invalid layer to remove");i.kmlLayers.splice(e,1)}};e.a=i},NHnr:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});t("ifoU");var o=t("vccH"),r="https://overpass-api.de/api/interpreter",a="https://overpass.kumi.systems/api/interpreter";function i(n,e,t){return Object(o.a)(t?a:r,{method:"POST",responseType:"json",progress:e,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"data="+encodeURIComponent(n)},"POST").catch(function(o){if(t)throw o;return i(n,e,!0)})}var s="[timeout:9000][maxsize:2000000000][out:json];",u=["motorway","motorway_link","trunk","trunk_link","primary","primary_link","secondary","secondary_link","tertiary","tertiary_link","unclassified","unclassified_link","residential","residential_link","service","service_link","living_street","pedestrian","road"].join("|"),l={roads:function(n){return s+'\n(\n  way["highway"~"'+u+'"]('+n+");\n  node(w);\n);\nout skel;"},waterway:function(n){return s+'\n(\n  way["waterway"]('+n+");\n  node(w);\n);\nout skel;"},buildings:function(n){return s+'\n(\n  way["building"]('+n+");\n  node(w);\n);\nout skel;"},rivers:function(n){return s+'\n(\n  way["waterway"="river"]('+n+");\n  node(w);\n);\nout skel;"}};var d=t("9SxT"),c=t("14gb"),h=t("//Fk"),f=t.n(h),g=t("Zrlr"),m=t.n(g),p=t("wxAW"),w=t.n(p),y=function(){function n(){m()(this,n),this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY}return w()(n,[{key:"growBy",value:function(n){this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n}},{key:"addPoint",value:function(n,e){if(void 0===n)throw new Error("Point is not defined");var t=n,o=e;void 0===o&&(t=n.x,o=n.y),t<this.minX&&(this.minX=t),t>this.maxX&&(this.maxX=t),o<this.minY&&(this.minY=o),o>this.maxY&&(this.maxY=o)}},{key:"addRect",value:function(n){if(!n)throw new Error("rect is not defined");this.addPoint(n.left,n.top),this.addPoint(n.right,n.top),this.addPoint(n.left,n.bottom),this.addPoint(n.right,n.bottom)}},{key:"merge",value:function(n){n.minX<this.minX&&(this.minX=n.minX),n.minY<this.minY&&(this.minY=n.minY),n.maxX>this.maxX&&(this.maxX=n.maxX),n.maxY>this.maxY&&(this.maxY=n.maxY)}},{key:"left",get:function(){return this.minX}},{key:"top",get:function(){return this.minY}},{key:"right",get:function(){return this.maxX}},{key:"bottom",get:function(){return this.maxY}},{key:"width",get:function(){return this.maxX-this.minX}},{key:"height",get:function(){return this.maxY-this.minY}},{key:"cx",get:function(){return(this.minX+this.maxX)/2}},{key:"cy",get:function(){return(this.minY+this.maxY)/2}}]),n}(),v=t("JQN8");var b=t("T/ob"),k=t("4gmu");function x(n,e,t){var o=n.elements;return function(){var n=new y;return new f.a(function(t){k(o,e,function(){t(n)})});function e(e,r){"node"===e.type&&n.addPoint(e.lon,e.lat),r%5e4==0&&t(r,o.length,"bounds")}}().then(function(n){var r=function(n,e){e||(e=6371393);var t=[0,0],o=v.geoMercator().center([n.cx,n.cy]).scale(e);return function(n,e){t[0]=n,t[1]=e;var r=o(t);return{x:r[0],y:r[1]}}}(n),a=b(),i=new y;return new f.a(function(n){k(o,s,function(){return n({graph:a,projector:r,bounds:i})})});function s(n,s){if("node"===n.type){if(e&&!e(n))return;var u=r(n.lon,n.lat);i.addPoint(u.x,u.y),a.addNode(n.id,u)}else"way"===n.type&&n.nodes.forEach(function(e,t){if(t>0){var o=n.nodes[t-1],r=n.nodes[t];a.getNode(o)&&a.getNode(r)&&a.addLink(o,r)}});s%5e4==0&&t(s,o.length,"graph")}})}var Y=t("AMV0"),N=t.n(Y);function T(n){return N()(n)?n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"N/A"}var I=t("1e2d"),X=t.n(I),C=t("xQT3");t.e(0).then(function(){t("WOBu")}.bind(null,t)).catch(t.oe);var L,S=void 0;function P(){d.a.showZoomWarning=S.getZoom()<9.7}function E(){var n=S.getBounds(),e=n.getSouthWest(),t=n.getNorthEast(),o=e.lat+","+e.lng+","+t.lat+","+t.lng;d.a.building=!0,d.a.buildingMessage="Sending query to OSM...",d.a.blank=!1,d.a.error=null,function(n){L=n.cancel,d.a.showCancelDownload=!0,n.then(function(n){return L=null,d.a.showCancelDownload=!1,x(n,function(){var n=S.getBounds(),e=n.getSouthWest(),t=n.getNorthEast();return function(n){return n.lon>=e.lng&&n.lon<=t.lng&&n.lat>=e.lat&&n.lat<=t.lat}}(),O)}).then(function(n){var e=n.graph,t=n.bounds,o=n.projector;d.a.setGraph(e,t,o),d.a.building=!1,0===e.getLinksCount()?d.a.blank=!0:(d.a.currentState="canvas",d.a.blank=!1,c.a.fire("graph-loaded"))}).catch(function(n){n&&n.cancelled?(L=null,d.a.building=!1,d.a.showCancelDownload=!1):(d.a.building=!1,d.a.error=n)})}(function(n,e,t){return i(l[n](e),t)}(d.a.possibleScripts.selected,o,M))}function M(n){var e=T(n.loaded);if(n.lengthComputable){var t=T(n.total);d.a.buildingMessage="Downloading data: "+100*n.percent+"% ("+e+" of "+t+" bytes)"}else d.a.buildingMessage="Downloading data: "+e+" bytes so far..."}function O(n,e,t){var o=T(e),r=T(n);d.a.buildingMessage="graph"===t?"Making graph: "+r+" of "+o+" records":"Computing bounds: "+r+" of "+o+" records"}d.a.init=function(){X.a.accessToken="pk.eyJ1IjoiYW52YWthIiwiYSI6ImNrNWRqcDdnNTF4MHYzbXAzNDJzODludnYifQ.2WDAbuAzUuchNtCAcZitAw",(S=new X.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[-122.2381,47.624],zoom:11.32,hash:!0})).addControl(new X.a.NavigationControl({showCompass:!1}),"bottom-right"),S.addControl(new C({accessToken:X.a.accessToken})),S.on("zoom",P),S.dragRotate.disable(),S.touchZoomRotate.disableRotation(),P(),c.a.on("download-all-roads",E),c.a.on("cancel-download-all-roads",function(){L&&L()})}},vccH:function(n,e,t){"use strict";e.a=function(n,e){e||(e={});var t=void 0,o=new i.a(function(o,a){t=new XMLHttpRequest,"function"==typeof e.progress&&t.addEventListener("progress",function(n){n.lengthComputable?e.progress({loaded:n.loaded,total:n.total,percent:n.loaded/n.total,lengthComputable:!0}):e.progress({loaded:n.loaded,lengthComputable:!1})},!1);t.addEventListener("load",function(){if(200===t.status){var r=t.response;"json"===e.responseType&&"string"==typeof r&&(r=JSON.parse(r)),o(r)}else a("Unexpected status code "+t.status+" when calling "+n)},!1),t.addEventListener("error",function(){a("Failed to download "+n)},!1),t.addEventListener("abort",function(){a({cancelled:!0,message:"Cancelled download of "+n})},!1),t.open(e.method||"GET",n),e.responseType&&(t.responseType=e.responseType);e.headers&&r()(e.headers).forEach(function(n){t.setRequestHeader(n,e.headers[n])});"POST"===e.method?t.send(e.body):t.send(null)});return o.cancel=function(){t&&t.abort()},o};var o=t("fZjL"),r=t.n(o),a=t("//Fk"),i=t.n(a)}},["NHnr"]);
//# sourceMappingURL=app.4c072a4e591b668bf21b.js.map